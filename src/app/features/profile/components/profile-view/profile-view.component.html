<div class="profile-container" *ngIf="profile$ | async as profile">
  <mat-card class="profile-card">
    <mat-card-header>
      <div mat-card-avatar class="profile-avatar">
        <img [src]="profile.avatar || 'assets/images/default-avatar.png'" [alt]="profile.username">
        <mat-chip *ngIf="profile.status" class="status-chip" [color]="getStatusColor(profile.status)" size="small">
          {{ profile.status }}
        </mat-chip>
      </div>
      <mat-card-title>
        {{ profile.displayName || profile.username }}
        <span *ngIf="profile.isEmailVerified" matTooltip="Verified" class="verified-badge">
          <mat-icon>verified</mat-icon>
        </span>
      </mat-card-title>
      <mat-card-subtitle>{{ '@' + profile.username }}</mat-card-subtitle>
      
      <button *ngIf="isCurrentUser" mat-icon-button class="edit-button" [routerLink]="['/profile/edit']">
        <mat-icon>edit</mat-icon>
      </button>
    </mat-card-header>

    <mat-card-content>
      <p *ngIf="profile.bio" class="bio">{{ profile.bio }}</p>
      
      <mat-divider></mat-divider>
      
      <mat-list>
        <mat-list-item *ngIf="profile.email">
          <mat-icon matListItemIcon>email</mat-icon>
          <div mat-line>Email</div>
          <div mat-line class="secondary">{{ profile.email }}</div>
        </mat-list-item>
        
        <mat-list-item *ngIf="profile.phone">
          <mat-icon matListItemIcon>phone</mat-icon>
          <div mat-line>Phone</div>
          <div mat-line class="secondary">{{ profile.phone }}</div>
        </mat-list-item>
        
        <mat-list-item *ngIf="profile.location">
          <mat-icon matListItemIcon>location_on</mat-icon>
          <div mat-line>Location</div>
          <div mat-line class="secondary">{{ profile.location }}</div>
        </mat-list-item>
        
        <mat-list-item *ngIf="profile.website">
          <mat-icon matListItemIcon>public</mat-icon>
          <div mat-line>Website</div>
          <a mat-line class="secondary" [href]="profile.website" target="_blank">{{ profile.website }}</a>
        </mat-list-item>
        
        <mat-list-item *ngIf="profile.createdAt">
          <mat-icon matListItemIcon>calendar_today</mat-icon>
          <div mat-line>Member since</div>
          <div mat-line class="secondary">{{ profile.createdAt | date:'mediumDate' }}</div>
        </mat-list-item>
      </mat-list>
      
      <div *ngIf="profile.socialLinks" class="social-links">
        <h3>Social Links</h3>
        <div class="social-icons">
          <a *ngIf="profile.socialLinks.twitter" [href]="profile.socialLinks.twitter" target="_blank" mat-icon-button>
            <mat-icon svgIcon="twitter"></mat-icon>
          </a>
          <a *ngIf="profile.socialLinks.github" [href]="profile.socialLinks.github" target="_blank" mat-icon-button>
            <mat-icon svgIcon="github"></mat-icon>
          </a>
          <a *ngIf="profile.socialLinks.linkedin" [href]="profile.socialLinks.linkedin" target="_blank" mat-icon-button>
            <mat-icon svgIcon="linkedin"></mat-icon>
          </a>
        </div>
      </div>
    </mat-card-content>
    
    <mat-card-actions *ngIf="isCurrentUser" align="end">
      <button mat-button color="primary" [routerLink]="['/profile/edit']">
        <mat-icon>edit</mat-icon> Edit Profile
      </button>
    </mat-card-actions>
  </mat-card>
</div>
